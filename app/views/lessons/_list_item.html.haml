%section.lesson-item{class: "span12 lesson-#{lesson.status.downcase}"}
  .row
    .header.col-md-12
      %h3= lesson.name.capitalize
      .lesson-attendance.pull-right
        = "#{lesson.attendance} / #{lesson.max_attendee}"
        %i.icon-user
  .row
    .col-md-8
      .meetup_image
        -if lesson.lesson_upload_image.url.present?
          =image_tag lesson.lesson_upload_image.url(:thumb).to_s, alt: lesson.name, class: 'lesson-image uploaded-lesson-image'
      .summary
        %p= simple_format lesson.do_during_class
    .col-md-4
      = render :partial => 'lessons/lesson_details', :locals => { :lesson => lesson }
  .row
    .col-md-12
      .actions
        - if chalkler_signed_in?
          - if lesson.bookable? and !current_chalkler.lessons.where{bookings.status.eq 'yes'}.exists? lesson
            .btn.btn-primary.join-lesson= link_to lesson.join_chalklers, new_channel_lesson_booking_path(@channel, lesson)
        - elsif lesson.bookable?
          .btn.btn-primary.join-lesson= link_to lesson.join_chalklers, new_channel_lesson_booking_path(@channel, lesson)
        .btn.btn-primary= link_to 'View class', channel_lesson_path(@channel, lesson)
